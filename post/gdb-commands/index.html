<!DOCTYPE html>
<html lang="zh-CN">

  
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="tldr">
  <meta name="generator" content="Hugo 0.18.1" />
  <title>gdb 基本命令 — TL;DR BLOG</title>

  <meta name="description" content="">
  <link rel="canonical" href="https://zyx-vec.github.io/myblog/post/gdb-commands/">
  <link href="" rel="alternate" type="application/rss+xml" title="TL;DR BLOG">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Arvo:400,700">
  <link rel="stylesheet" href="https://zyx-vec.github.io/myblog/css/highlight.css">
  <link rel="stylesheet" href="https://zyx-vec.github.io/myblog/css/paperback.css">
</head>


  <body>
    <div class="container">

      <header>
  <h1>gdb 基本命令</h1>

  
  <time datetime="2016-10-11 16:33:09 &#43;0800 CST">2016/10/11</time>
  

  
</header>


      <article>
        <ul>
<li><strong>GDB 是什么？</strong>
<br /></li>
</ul>

<p>GDB 是强大的调试工具，属于 GNU tool chain 中的工具之一，功能能强大，常用语调试C和C++程序；不仅仅支持C/C++，还可用于调试Objective-C/Ada/Pascal程序；常用的功能包括设断点、查看源代码、查看变量的值、监测变量的值、查看内存中的内容和单步调试等等。GDB 功能强大，它能做的事也是纷繁复杂，感兴趣可以查看其官方提供的文档，真是洋洋洒洒近八百多页！</p>

<p>官方文档：<a href="https://www.gnu.org/software/gdb/documentation/">gdb官方文档</a></p>

<p>但是常见功能并不是很多，掌握一些常用的命令，需要时再去查看文档即可。</p>

<ul>
<li><p><strong>GDB 中常用的命令</strong></p>

<ol>
<li>运行 gdb 调试器
<br /></li>
</ol>

<p><code>$ gcc src.c -o a.out -g</code>：其中<code>-g</code>必须加上，不然的话就缺少调试所需要的信息</p>

<p><code>$ gdb a.out</code></p>

<ol>
<li>查看源代码
<br /></li>
</ol>

<p><code>list</code> ：用于查看当前位置（根据上一次list到哪里来算）起始的10行代码，简写为 <code>l</code></p>

<p><code>list linenum</code>：查看指定行之后的10行源代码</p>

<p><code>list function</code>：用于查看指定函数的源代码</p>

<ol>
<li>断点
<br /></li>
</ol>

<p><code>break linenum</code>：在指定的行位置处设一个断点，简写为 <code>b</code></p>

<p><code>info breakpoints</code>：查看当前所有断点的信息，其中断点的信息包含</p>

<p><code>info break n</code>：查看标号为 n 的断点的信息</p>

<p><code>clear</code>：删除指定 frame 中的所有断点</p>

<p><code>clear location</code>：删除指定位置的断点</p>

<p><code>disable [range...]</code>：消除指定范围的断点的效果</p>

<p><code>enable [range...]</code>：使能指定范围的断点的效果</p>

<ol>
<li>查看变量值
<br /></li>
</ol>

<p><code>print var</code>：用于查看指定变量的内容，简写为 <code>p var</code></p>

<p>指定格式的输出格式包括</p>

<ol>
<li>查看内存中的值
<br /></li>
</ol>

<p><code>x/nfu addr</code></p>

<p><code>x addr</code></p>

<p><code>x</code>：x 为 <code>examine</code> 的简写，用于查看指定内存地址中的内容，上述<code>nfu</code>目的是控制查看的方式。</p>

<blockquote>
<p>n, f, and u are all optional parameters that specify <em>how much</em> memory to display and <em>how to format</em> it; addr is an expression giving the address <em>where</em> you want to start displaying memory.</p>
</blockquote>

<p><code>n</code>，表示重复的次数，如果为负值则向前查看</p>

<p><code>f</code>，指定输出的格式，包括前面print指令中用到的 <code>x d u o t a f s</code>，效果一样，还有一个 <code>i</code> 选项，用来输出指令</p>

<p><code>u</code>，用来指定查看数据的宽度，包括 <code>b h w g</code> 四种，分别表示字节、2字节、4字节和8字节。</p>

<p>例如：<code>(gdb) x/5i $pc-6</code> 就会输出5条指令，<code>=&gt;</code> 会指明当前<code>$pc</code>指向的指令</p>

<ol>
<li>查看函数调用栈
<br /></li>
</ol>

<p>​</p>

<ol>
<li>​
<br /></li>
</ol></li>

<li><p><strong>命令测试</strong></p></li>

<li><p><strong>总结</strong></p></li>
</ul>

      </article>

      <nav class="site-nav">
  <a href="https://zyx-vec.github.io/myblog/">Home</a>
  <a href="https://zyx-vec.github.io/myblog/post/">All posts</a>

  

    

</nav>


      <footer class="site-footer">
  <span class="owner">©2016 tldr</span>

  
</footer>


    </div>

  
<script src="https://zyx-vec.github.io/myblog/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


  </body>
</html>
